<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"      
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:cyk="http://primefaces.jsf.web.utility.cyk.org">
	
	<ui:param name="accountRequest" value="#{__page__.accountRequest}"/>
	<ui:param name="identity" value="#{accountRequest.identity == null ? accountRequest : accountRequest.identity}"/>
		
   	<p:toolbar>
   		<f:facet name="left">    					   		
	   		<h:outputText value="Créé le #{accountRequest.creationDateAsString}" rendered="#{not empty accountRequest.creationDateAsString}"/>		    				
	   		<h:outputText value=" | Transmis le #{accountRequest.submissionDateAsString}" rendered="#{not empty accountRequest.submissionDateAsString}"/>		    				
	    	<!--
	    	<h:outputText value=" | Validé par l'ordonnateur le #{accountRequest.validationByOrdonnateurDate}" rendered="#{not empty accountRequest.validationByOrdonnateurDate}"/>
	    	<h:outputText value=" | Validé par la DGBF le #{accountRequest.validationByDGBFDate}" rendered="#{not empty accountRequest.validationByDGBFDate}"/>
	    	-->
   		</f:facet>
   		<f:facet name="right">
   			<ui:decorate template="#{primefacesHelper.getModelTemplate(__page__.editCommandButton)}">
    			<ui:param name="commandButton" value="#{__page__.editCommandButton}"/> 		
    		</ui:decorate>
   			<!--
   			<ui:fragment rendered="#{empty accountRequest.sendingDate}">
	    		<p:button value="Modifier" icon="fa fa-edit" outcome="#{__page__.isProgramManager ? 'userProgramManagerEditView' : 'userCreditManagerEditView'}">
	    			<f:param name="actionidentifier" value="update" />
	    			<f:param name="entityidentifier" value="#{accountRequest.identifier}" />
		    	</p:button>			 
		    		
		    	<ui:decorate template="/command/commandbutton/default.xhtml">
		    		<ui:param name="commandButton" value="#{__page__.sendCommandButton}"/>
		    	</ui:decorate>
		    		
		    	<ui:decorate template="/command/commandbutton/default.xhtml">
		    		<ui:param name="commandButton" value="#{__page__.deleteCommandButton}"/>
		    	</ui:decorate>
	    	</ui:fragment>
   			<p:button value="Imprimer" icon="fa fa-print" href="#{accountRequest.reportUniformResourceIdentifier}" target="_blank"/>
   			-->
   		</f:facet>    			
   	</p:toolbar>
    		
    <p:staticMessage severity="#{__page__.staticMessageSeverity}" summary="#{__page__.staticMessageSummary}" detail="#{__page__.staticMessageDetail}"/>
    <div class="ui-g">	
    	<div class="ui-g-12">	    			
	  		<div class="ui-g-8">
	  			<div class="ui-g-12">
		    		<div class="ui-g-3">
		    			<span class="ui-inputgroup-addon"><i class="fa fa-user"/></span>
			    		<h:outputText value="Identité" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
		    		</div>
		    		<div class="ui-g-9">
		    			<h:outputText value="#{identity.civilityAsString}" />
			    		<h:outputText value=" #{identity.firstName}" />
			    		<h:outputText value=" #{identity.lastNames}" />
			    		<h:outputText value=" #{identity.groupAsString}" />
			    		<h:outputText value=" #{identity.registrationNumber}" />
		    		</div>		    						    				
	    		</div>
	    				
	    		<div class="ui-g-12">
		    		<div class="ui-g-3">
		    			<span class="ui-inputgroup-addon"><i class="fa fa-globe"/></span>
			    		<h:outputText value="Contacts" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
		    		</div>
		    		<div class="ui-g-9">
			    		<span class="ui-inputgroup-addon"><i class="fa fa-at"/></span>
			    		<h:outputText value="  #{identity.electronicMailAddress}" />
			    		<span class="ui-inputgroup-addon"><i class="fa fa-envelope"/></span>
			    		<h:outputText value="  #{identity.postalBoxAddress}" />
			    		<span class="ui-inputgroup-addon"><i class="fa fa-phone"/></span>
		    			<h:outputText value="  #{identity.officePhoneNumber}" />
		    			<span class="ui-inputgroup-addon"><i class="fa fa-tag"/></span>
		    			<h:outputText value="  #{identity.officePhoneExtension}" />
		    			<span class="ui-inputgroup-addon"><i class="fa fa-mobile-phone"/></span>
		    			<h:outputText value="  #{identity.mobilePhoneNumber}" /> 
		    		</div>
	    		</div>
	    				
   				<div class="ui-g-12">
    				<div class="ui-g-3">
    					<span class="ui-inputgroup-addon"><i class="fa fa-university"/></span>
    					<h:outputText value="Unité administrative" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
    				</div>
    				<div class="ui-g-9">
    					<h:outputText value="#{identity.administrativeUnitAsString}" />
    				</div>
   				</div>
	    				
   				<div class="ui-g-12">
    				<div class="ui-g-3">
    					<span class="ui-inputgroup-addon"><i class="fa fa-flash"/></span>
    					<h:outputText value="Fonction administrative" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
    				</div>
    				<div class="ui-g-9">
    					<h:outputText value="#{identity.administrativeFunction}" />
    				</div>
   				</div>
	    				
   				<div class="ui-g-12">
    				<div class="ui-g-3">
    					<span class="ui-inputgroup-addon"><i class="fa fa-file"/></span>
    					<h:outputText value="Acte de nomination" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
    				</div>
    				<div class="ui-g-9">
    					<h:outputText value=" N° #{identity.actOfAppointmentReference} " 
    						rendered="#{not empty identity.actOfAppointmentReference}" style="float:left"/>
    					
    					<h:outputText value=" Signé par : #{identity.actOfAppointmentSignatory} " 
    						rendered="#{not empty identity.actOfAppointmentSignatory}" style="float:left"/>
    						
    					<h:outputText value=" Signé le #{identity.actOfAppointmentSignatureDateAsString} " 
    						rendered="#{not empty identity.actOfAppointmentSignatureDateAsString}" style="float:left"/>		
    					<!--	
	    				<p:outputPanel id="actOfAppointmentFileOutputPanel" style="float:left">
	    					<ui:fragment rendered="#{__page__.actOfAppointmentUserFile == null}">
	    						<p:commandButton id="uploadAdministrativeUnitCertificateFile" icon="fa fa-upload" 
	    							action="#{__page__.openDialog('uploadAdministrativeUnitCertificateFile')}" 
	    							update=":form:actOfAppointmentFileOutputPanel,:form:dialogOutputPanel" oncomplete="PF('dialog').show();" 
	    							styleClass="cyk-margin-left-10-px" />
	    						<p:tooltip value="Joindre un fichier" for="uploadAdministrativeUnitCertificateFile" />
	    					</ui:fragment>
	    					
	    					<ui:fragment rendered="#{__page__.actOfAppointmentUserFile != null}">
	    						<p:button id="viewAdministrativeUnitCertificateFile" icon="fa fa-eye" 
	    							href="#{identity.administrativeCertificateUniformResourceIdentifier}" target="_blank" 
	    							styleClass="cyk-margin-left-10-px"/>
	    						<p:tooltip value="Voir le fichier joint" for="viewAdministrativeUnitCertificateFile" />
	    						
	    						<p:commandButton id="deleteAdministrativeUnitCertificateFile" icon="fa fa-remove" 
	    							action="#{__page__.deleteAdministrativeUnitCertificateFile}" 
    								update=":form:actOfAppointmentFileOutputPanel,:form:dialogOutputPanel" 
    								styleClass="cyk-margin-left-10-px"/>
    							<p:tooltip value="Supprimer le fichier joint" for="deleteAdministrativeUnitCertificateFile" />
	    					</ui:fragment>
	    				</p:outputPanel>
	    				-->	
    				</div>			
   				</div>
	    					    				
   				<div class="ui-g-12">
    				<div class="ui-g-3">
    					<span class="ui-inputgroup-addon"><i class="fa fa-wrench"/></span>
    					<h:outputText value="Fonction(s) budgétaire(s) demandée(s)" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
    				</div>
    				<div class="ui-g-9">    					
    					<ui:repeat value="#{identity.budgetaryFunctions}" var="budgetaryFunction" varStatus="varStatusObject">
    						<h:outputText value="#{varStatusObject.index+1}. #{budgetaryFunction}" /><br/><br/>
    					</ui:repeat>
    				</div>
    			</div>
    			
    			<div class="ui-g-12">
    				<div class="ui-g-3">
    					<span class="ui-inputgroup-addon"><i class="fa fa-wrench"/></span>
    					<h:outputText value="Fonction(s) applicative(s) demandée(s)" styleClass="cyk-margin-left-10-px cyk-font-weight-bold"/>
    				</div>
    				<div class="ui-g-9">    					
    					<ui:repeat value="#{identity.functions}" var="function" varStatus="varStatusObject">
    						<h:outputText value="#{varStatusObject.index+1}. #{function}" /><br/><br/>
    					</ui:repeat>
    				</div>
    			</div>
	    	</div>
	    			
    		<!-- Photo -->    		
    		<p:outputPanel id="photoFileOutputPanel" styleClass="ui-g-4">
    			<!--
    			<p:graphicImage url="#{identity.photoUniformResourceIdentifier}" alt="Photo" 
    				rendered="#{__page__.photoUserFile != null and not empty identity.photoUniformResourceIdentifier}" width="150" height="150"/>
    			<h:outputText value="PHOTO" rendered="#{__page__.photoUserFile == null or empty identity.photoUniformResourceIdentifier}"/>
    			
   				<ui:fragment rendered="#{__page__.photoUserFile == null}">
   					<p:commandButton id="uploadPhotoFile" icon="fa fa-upload" 
   						action="#{__page__.openDialog('uploadPhotoFile')}" update=":form:photoFileOutputPanel,:form:dialogOutputPanel" oncomplete="PF('dialog').show();" 
   						styleClass="cyk-margin-left-10-px" />
   					<p:tooltip value="Joindre un fichier" for="uploadPhotoFile" />
   				</ui:fragment>
   				
   				<ui:fragment rendered="#{__page__.photoUserFile != null}">	    						
   					<p:commandButton id="deletePhotoFile" icon="fa fa-remove" action="#{__page__.deletePhotoFile}" 
  							update=":form:photoFileOutputPanel,:form:dialogOutputPanel" styleClass="cyk-margin-left-10-px"/>
  						<p:tooltip value="Supprimer le fichier joint" for="deletePhotoFile" />
   				</ui:fragment>
   				-->
   			</p:outputPanel>
   		</div>	 			
   	</div>
    		
   	<p:outputPanel id="dialogOutputPanel">
   		<!--
   		<p:dialog id="dialog" widgetVar="dialog" modal="true" resizable="false" closable="true" closeOnEscape="true" draggable="false" 
   			header="#{__page__.dialogTitle}" dynamic="true">    			
    		<ui:fragment rendered="#{__page__.dialogAction eq 'uploadAdministrativeUnitCertificateFile'}">
    			<p:fileUpload id="file" fileUploadListener="#{__page__.listenAdministrativeUnitCertificateFileUpload}" 
	    			label="Sélectionner un fichier au format pdf ou image" multiple="false" mode="advanced" allowTypes="/(\.|\/)(pdf|jpg|jpeg|bmp|gif|png)$/" 
	    			sizeLimit="2097152" invalidSizeMessage="La taille du fichier ne doit pas être supérieur à deux(2) MB" 
	    			fileLimit="1" fileLimitMessage="Vous ne pouvez que sélectionner un et un seul fichier. veuillez télécharger le fichier déja sélectionner ou l'annuler pour en prendre un autre."
	    			oncomplete="PF('dialog').hide();"
	    			uploadLabel="Télécharger" cancelLabel="Annuler" 
	    			update=":form:actOfAppointmentFileOutputPanel"/>
    		</ui:fragment>
    		
    		<ui:fragment rendered="#{__page__.dialogAction eq 'uploadPhotoFile'}">
    			<p:fileUpload id="photoFile" fileUploadListener="#{__page__.listenPhotoFileUpload}" 
	    			label="Sélectionner un fichier au format image" multiple="false" mode="advanced" allowTypes="/(\.|\/)(jpg|jpeg|bmp|gif|png)$/" 
	    			sizeLimit="2097152" invalidSizeMessage="La taille du fichier ne doit pas être supérieur à deux(2) MB" 
	    			fileLimit="1" fileLimitMessage="Vous ne pouvez que sélectionner un et un seul fichier. veuillez télécharger le fichier déja sélectionner ou l'annuler pour en prendre un autre."
	    			oncomplete="PF('dialog').hide();"
	    			uploadLabel="Télécharger" cancelLabel="Annuler" 
	    			update=":form:photoFileOutputPanel" previewWidth="100" />
    		</ui:fragment>
    	</p:dialog>
    	-->
   	</p:outputPanel>
</ui:composition>